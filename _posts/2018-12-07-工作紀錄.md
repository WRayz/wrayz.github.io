---
layout: post
title: 'EyesFree 開發紀錄'
date: 2018-12-08 12:31:05 +0800
categories: 日常開發
---

### 完成了幾件事情

- 重構一個 EF Web 頁面，為了方便切版，暫時不用 Oliver 元件。
- 前端使用後端的維修登記功能，由於登記之後還要再做推播，但現在後端分成 WebService、WebAPI，一直在猶豫放哪一個，今天決定了，有需要推播的功能，統一都交由 WebAPI，沒必要在兩個地方寫相同的東西，根本挖坑給自己。

### EF 碰到的 Bug

- 整合紀錄還是有錯啊...紀錄想要整合異常、正常、維修的三個時間，但最後發現，如果紀錄只有一組異常、正常，那筆紀錄顯示出來卻沒有正常時間。

### 還想改的東西

1. 監控紀錄資料表

   - 主鍵應該是只留紀錄編號即可，還要再想一下溫濕度計的情境
   - 我想移除掉設備編號，欄位新增 Detector，若是想找設備就用 ID + Detector 吧
   - 這麼做的話會影響哪些服務？

2. 監控項目資詢資料表
   - 新增項目編號，給個 3 碼使用
   - 項目編號有了之後，就可以修正手機後台服務要更新 EF 訊息，操控前端的維修按鈕變為 disable；這件事情比較好的作法應該是要卡在前端，不應該是後端控制...但現在想不到改動比較小並且比較快的作法了 QAQ
